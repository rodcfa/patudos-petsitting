<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Patudos - Gestão de PetSitting</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script type="module" crossorigin src="/assets/main-CuSQdlDh.js"></script>
  <link rel="modulepreload" crossorigin href="/assets/index-C_6bkvJA.js">
  <link rel="stylesheet" crossorigin href="/assets/main-BaNqILC4.css">
</head>
<body>
    <div class="app-container">
        <!-- Header -->
        <header class="header">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-paw"></i>
                    <h1>Patudos</h1>
                </div>
                <div class="header-nav">
                    <button class="btn btn-secondary" id="calendarViewBtn">
                        <i class="fas fa-calendar"></i>
                        Calendário
                    </button>
                    <button class="btn btn-secondary" id="dashboardViewBtn">
                        <i class="fas fa-chart-line"></i>
                        Dashboard Financeiro
                    </button>
                </div>
                <div class="header-actions">
                    <button class="btn btn-secondary" onclick="logout()">
                        <i class="fas fa-sign-out-alt"></i>
                        Sair
                    </button>
                    <button class="btn btn-primary" id="addClientBtn">
                        <i class="fas fa-plus"></i>
                        Adicionar Cliente
                    </button>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="main-content">
            <!-- Calendar Header -->
            <div class="calendar-header">
                <div class="calendar-nav">
                    <button class="nav-btn" id="prevMonth">
                        <i class="fas fa-chevron-left"></i>
                    </button>
                    <h2 id="currentMonth">Julho 2025</h2>
                    <button class="nav-btn" id="nextMonth">
                        <i class="fas fa-chevron-right"></i>
                    </button>
                </div>
                <div class="legend">
                    <div class="legend-item">
                        <div class="legend-color normal"></div>
                        <span>Normal (1-3 pets)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color warning"></div>
                        <span>Lotação (4 pets)</span>
                    </div>
                    <div class="legend-item">
                        <div class="legend-color danger"></div>
                        <span>Superlotação (5+ pets)</span>
                    </div>
                </div>
            </div>

            <!-- Calendar -->
            <div class="calendar-container">
                <div class="calendar-grid">
                    <div class="calendar-header-days">
                        <div class="day-header">Dom</div>
                        <div class="day-header">Seg</div>
                        <div class="day-header">Ter</div>
                        <div class="day-header">Qua</div>
                        <div class="day-header">Qui</div>
                        <div class="day-header">Sex</div>
                        <div class="day-header">Sáb</div>
                    </div>
                    <div class="calendar-days" id="calendarDays">
                        <!-- Days will be generated by JavaScript -->
                    </div>
                </div>
            </div>
        </main>

        <!-- Dashboard Financeiro -->
        <section class="dashboard-section" id="dashboardSection" style="display: none;">
            <div class="dashboard-header">
                <h2><i class="fas fa-chart-line"></i> Dashboard Financeiro</h2>
                <div class="dashboard-filters">
                    <select id="periodoFilter">
                        <option value="todos">Todos os Períodos</option>
                        <option value="mes-atual">Mês Atual</option>
                        <option value="ultimos-3-meses">Últimos 3 Meses</option>
                        <option value="ano-atual">Ano Atual</option>
                    </select>
                </div>
            </div>

            <div class="dashboard-content">
                <!-- Cards de Resumo -->
                <div class="stats-grid">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-euro-sign"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="receitaTotal">€0.00</h3>
                            <p>Receita Total</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calendar-check"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalAgendamentos">0</h3>
                            <p>Total de Agendamentos</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-bed"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="totalDias">0</h3>
                            <p>Dias de Hospedagem</p>
                        </div>
                    </div>
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-calculator"></i>
                        </div>
                        <div class="stat-content">
                            <h3 id="valorMedio">€0.00</h3>
                            <p>Valor Médio/Dia</p>
                        </div>
                    </div>
                </div>

                <!-- Gráficos -->
                <div class="charts-grid">
                    <div class="chart-container">
                        <h3>Receita por Mês</h3>
                        <canvas id="receitaMensalChart"></canvas>
                    </div>
                    <div class="chart-container">
                        <h3>Top Pets por Receita</h3>
                        <canvas id="topPetsChart"></canvas>
                    </div>
                </div>

                <!-- Tabela de Detalhes -->
                <div class="details-section">
                    <h3>Detalhes por Mês</h3>
                    <div class="table-container">
                        <table id="detalhesTable">
                            <thead>
                                <tr>
                                    <th>Mês</th>
                                    <th>Receita</th>
                                    <th>Agendamentos</th>
                                    <th>Dias de Hospedagem</th>
                                    <th>Média/Dia</th>
                                </tr>
                            </thead>
                            <tbody id="detalhesTableBody">
                                <!-- Dados serão preenchidos via JavaScript -->
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <!-- Modal for Day Details -->
        <div class="modal-overlay" id="dayDetailsModal">
            <div class="modal modal-large">
                <div class="modal-header">
                    <h3 id="dayDetailsTitle">Detalhes do Dia</h3>
                    <button class="close-btn" id="closeDayDetailsModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="modal-content">
                    <div class="day-summary">
                        <div class="summary-item">
                            <i class="fas fa-calendar-day"></i>
                            <span id="dayDetailsDate">Data</span>
                        </div>
                        <div class="summary-item">
                            <i class="fas fa-paw"></i>
                            <span id="dayDetailsPetCount">0 pets</span>
                        </div>
                    </div>
                    <div class="pets-list" id="dayDetailsPetsList">
                        <!-- Pets will be populated by JavaScript -->
                    </div>
                </div>
            </div>
        </div>

        <!-- Modal for Adding Client -->
        <div class="modal-overlay" id="modalOverlay">
            <div class="modal">
                <div class="modal-header">
                    <h3>Adicionar Novo Agendamento</h3>
                    <button class="close-btn" id="closeModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form class="modal-form" id="agendamentoForm">
                    <div class="form-group">
                        <label for="nomePet">Nome do Pet:</label>
                        <input type="text" id="nomePet" name="nomePet" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="dataInicio">Data de Início:</label>
                            <input type="date" id="dataInicio" name="dataInicio" required>
                        </div>
                        <div class="form-group">
                            <label for="dataFim">Data de Saída:</label>
                            <input type="date" id="dataFim" name="dataFim" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="valorPorDia">Valor por Dia (€):</label>
                        <input type="number" id="valorPorDia" name="valorPorDia" step="0.01" min="0" placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label for="observacoes">Observações:</label>
                        <textarea id="observacoes" name="observacoes" rows="3" placeholder="Informações adicionais sobre o pet ou agendamento..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-secondary" id="cancelBtn">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar Agendamento</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Modal for Editing Agendamento -->
        <div class="modal-overlay" id="editModal">
            <div class="modal modal-edit">
                <div class="modal-header">
                    <h3>Editar Agendamento</h3>
                    <button class="close-btn" id="closeEditModal">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <form class="modal-form" id="editAgendamentoForm">
                    <input type="hidden" id="editAgendamentoId">
                    <div class="form-group">
                        <label for="editNomePet">Nome do Pet:</label>
                        <input type="text" id="editNomePet" name="nomePet" required>
                    </div>
                    <div class="form-row">
                        <div class="form-group">
                            <label for="editDataInicio">Data de Início:</label>
                            <input type="date" id="editDataInicio" name="dataInicio" required>
                        </div>
                        <div class="form-group">
                            <label for="editDataFim">Data de Saída:</label>
                            <input type="date" id="editDataFim" name="dataFim" required>
                        </div>
                    </div>
                    <div class="form-group">
                        <label for="editValorPorDia">Valor por Dia (€):</label>
                        <input type="number" id="editValorPorDia" name="valorPorDia" step="0.01" min="0" placeholder="0.00">
                    </div>
                    <div class="form-group">
                        <label for="editObservacoes">Observações:</label>
                        <textarea id="editObservacoes" name="observacoes" rows="3" placeholder="Informações adicionais sobre o pet ou agendamento..."></textarea>
                    </div>
                    <div class="form-actions">
                        <button type="button" class="btn btn-danger" id="deleteAgendamentoBtn">
                            <i class="fas fa-trash"></i>
                            Excluir Completamente
                        </button>
                        <div style="flex: 1;"></div>
                        <button type="button" class="btn btn-secondary" id="cancelEditBtn">Cancelar</button>
                        <button type="submit" class="btn btn-primary">Salvar Alterações</button>
                    </div>
                </form>
            </div>
        </div>

        <!-- Loading Spinner -->
        <div class="loading-overlay" id="loadingOverlay">
            <div class="spinner"></div>
        </div>
    </div>

</body>
</html>